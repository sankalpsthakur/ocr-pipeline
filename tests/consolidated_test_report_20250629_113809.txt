Running comprehensive test suite...

================================================================================
CONSOLIDATED OCR PIPELINE TEST REPORT
Generated: 2025-06-29 11:38:09
================================================================================

============================================================
EXECUTIVE SUMMARY
============================================================
Field-Level Accuracy: 100.0% (18/18 fields)
Test Coverage: 10 ground truth cases
Status: PASS ✓

============================================================
ACCURACY IMPROVEMENTS IMPLEMENTATION STATUS
============================================================
Unified Geometric Correction   ✓ Implemented   Auto-rotate, deskew, dewarp in ImageCache
Engine-Specific Tuning         ✓ Implemented   Per-document-type configurations
Token-Level Ensemble Voting    ✓ Implemented   Bounding box alignment & voting
Confidence Recalibration       ✓ Implemented   ConfidenceCalibrator system
Field-Aware Post-Processing    ✓ Implemented   Numerical & field corrections
VLM Bounding Box Hints         ✓ Implemented   High-confidence region extraction
Cross-Field Validation         ✓ Implemented   Value relationship validation
Adaptive Thresholds            ✓ Implemented   TAU_FIELD_ACCEPT, TAU_ENHANCER_PASS

============================================================
OCR ENGINE PERFORMANCE COMPARISON
============================================================
Engine       Word Acc   Char Acc   Avg Conf  
------------------------------------------
tesseract    90.9      % 97.0      % 0.881     
easyocr      90.9      % 97.0      % 0.903     
paddleocr    100.0     % 100.0     % 0.936     

============================================================
GROUND TRUTH FIELD EXTRACTION RESULTS
============================================================

Text: Dubai Electricity Water Authority Invoice Electric...
  Electricity: 299 (expected: 299) ✓
  Carbon: 120 (expected: 120) ✓

Text: Consumption: 299 kWh Carbon emissions: 120 kg CO2e
  Electricity: 299 (expected: 299) ✓
  Carbon: 120 (expected: 120) ✓

Text: Electricity usage 1,234 kWh Environmental impact 4...
  Electricity: 1234 (expected: 1234) ✓
  Carbon: 456 (expected: 456) ✓

Text: 299 Electricity kWh Carbon 120 kg CO2e
  Electricity: 299 (expected: 299) ✓
  Carbon: 120 (expected: 120) ✓

Text: Dubai bill usage 500 kWh footprint 200 kg
  Electricity: 500 (expected: 500) ✓
  Carbon: 200 (expected: 200) ✓

============================================================
TEST SUITE SUMMARY
============================================================
Core Framework Tests             4 tests
Accuracy Improvements            6 tests
Ground Truth Accuracy            2 tests
Engine Integration               3 tests
Robustness Features              3 tests
Validation & Processing          3 tests
Output & Metadata                2 tests
Real World Scenarios             3 tests
Word/Character Accuracy          3 tests
-----------------------------------
TOTAL                           29 tests

============================================================
PERFORMANCE METRICS
============================================================
Image Cache: Enabled with geometric corrections
Parallel Processing: Multi-engine concurrent execution
Confidence Thresholds:
  - TAU_FIELD_ACCEPT: 0.95
  - TAU_ENHANCER_PASS: 0.9
  - TAU_LLM_PASS: 0.85

============================================================
RECOMMENDATIONS
============================================================
✓ Excellent accuracy achieved - ready for production

Next Steps:
1. Continue monitoring field-level accuracy on new documents
2. Collect production data for confidence recalibration
3. Fine-tune thresholds based on real-world performance

================================================================================
END OF CONSOLIDATED REPORT
================================================================================


Test Execution Summary:
.........................................                                [100%]
=============================== warnings summary ===============================
venv/lib/python3.13/site-packages/pytesseract/pytesseract.py:32
  /Users/sankalpthakur/Projects/Projects - Emtribe/ocr_pipeline/venv/lib/python3.13/site-packages/pytesseract/pytesseract.py:32: DeprecationWarning: 'pkgutil.find_loader' is deprecated and slated for removal in Python 3.14; use importlib.util.find_spec() instead
    numpy_installed = find_loader('numpy') is not None

venv/lib/python3.13/site-packages/pytesseract/pytesseract.py:36
  /Users/sankalpthakur/Projects/Projects - Emtribe/ocr_pipeline/venv/lib/python3.13/site-packages/pytesseract/pytesseract.py:36: DeprecationWarning: 'pkgutil.find_loader' is deprecated and slated for removal in Python 3.14; use importlib.util.find_spec() instead
    pandas_installed = find_loader('pandas') is not None

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
41 passed, 2 warnings in 0.47s

Warnings/Errors:
/Users/sankalpthakur/Projects/Projects - Emtribe/ocr_pipeline/venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:207: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))

