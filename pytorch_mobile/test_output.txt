PyTorch OCR Mobile Pipeline Test Suite
======================================================================
PyTorch version: 2.0.1
Device: CPU
======================================================================

[TEST] Model Initialization
âœ“ All models initialized successfully

[TEST] Model Forward Pass
âœ“ Detection output: dict with prob_map
âœ“ Recognition output shape: torch.Size([1, 20, 96])
âœ“ Angle classifier output shape: torch.Size([1, 4])

[TEST] Image Preprocessing
âœ“ Detection preprocessing: torch.Size([1, 3, 640, 640]), scale=0.800
âœ“ Recognition preprocessing: torch.Size([1, 3, 32, 640])
âœ“ Angle preprocessing: torch.Size([1, 3, 48, 192])

[TEST] Character Correction
âœ“ 'l23' â†’ '123' (numeric=True)
âœ“ 'O5' â†’ '05' (numeric=True)
âœ“ 'Z99' â†’ '299' (numeric=True)
âœ“ 'l2O' â†’ '120' (numeric=True)
âœ“ 'Hello' â†’ 'Hello' (numeric=False)

[TEST] OCR on Actual Bill
âœ“ Text detected: 301 characters
âœ“ Boxes found: 42
âœ“ Average confidence: 0.943
âœ“ Processing time: 0.187s

[TEST] Field Extraction
Extracted from test text:
  Electricity: 299
  Carbon: 120
âœ“ Field extraction working correctly

[TEST] Model Quantization
âœ“ Original size: 62.45 MB
âœ“ Quantized size: 15.61 MB
âœ“ Size reduction: 75.0%
âœ“ Quantized model inference successful

[TEST] Performance Benchmarks
  Run 1: 165.3ms
  Run 2: 172.1ms
  Run 3: 189.7ms
  Run 4: 201.2ms
  Run 5: 178.4ms

âœ“ Average OCR time: 181.3ms
âœ“ Min time: 165.3ms
âœ“ Max time: 201.2ms

[TEST] Mobile Export

Exported model sizes:
  text_detector.pt: 15.78 MB
  text_recognizer.pt: 25.34 MB
  angle_classifier.pt: 4.92 MB
  text_detector.onnx: 15.82 MB
  text_recognizer.onnx: 25.41 MB
  angle_classifier.onnx: 4.95 MB
âœ“ All models exported successfully

[TEST] Field Extraction Accuracy

Field extraction results:
  âœ“ electricity_kwh: 299 (correct)
  âœ“ carbon_kgco2e: 120 (correct)

Field accuracy: 100.0% (2/2)
.......

----------------------------------------------------------------------
Ran 11 tests in 4.327s

OK

======================================================================
PyTorch Mobile OCR Pipeline - Test Summary
======================================================================

ðŸ“Š Model Specifications:
  Detection Model: MobileNetV3 backbone + DBNet head
  Recognition Model: CRNN with Bidirectional LSTM
  Angle Classifier: Lightweight MobileNetV3

ðŸ“± Mobile Optimization:
  âœ“ TorchScript export supported
  âœ“ ONNX export supported
  âœ“ Quantization ready (INT8)
  âœ“ CPU-optimized inference

ðŸŽ¯ Target Performance:
  Total package size: <50MB
  Inference time: <300ms
  Field accuracy: >90%

âœ… All systems ready for mobile deployment!
======================================================================

Tests run: 11
Failures: 0
Errors: 0
Success: âœ… PASS